<section class="layout_section theme_light">
  <h1 class="type_heading">Preview Search</h1>
  <p class="type_copy">Use the text input to search, and use the facets to filter. <code>*:*</code> will bring back everything you've indexed <code>[key]:'[value]'</code> will bring back results that match the <code>[key]</code> with the <code>[value]</code>; e.g., <code>town:'ashfield'</code> <code>[key1]:'[value1]' OR [key2]:'[value2]'</code> is the syntax for multiple matches. Combine free text and faceted search like this: <code>willowbank AND [key]:'[value]'</code></p>
</section>
<section class="layout_section theme_dark">

<form ng-submit="search()">
  <div class="form_field" id="searchcontrol">
    <div class="form_addon-group">
      <span class="form_text-addon">https://.../search?q=</span>
      <input type="text" class="input_text" id="q" placeholder="" name="searchterm">
    </div>
  </div>
  <button type="submit" class="button_primary" ng-click="search()"> Search </button>
</form>
<hr>

<h2 class="type_heading">Results : {{searchDocs.time}} ms</h2>

<section class="tabbed-panel">
  <ul class="tabbed-panel_tab-group">
    <li class="tabbed-panel_tab" ng-class="{'current': currentSearchPanel === 'html'}" ng-click="currentSearchPanel = 'html'">HTML</li>
    <li class="tabbed-panel_tab" ng-class="{'current': currentSearchPanel === 'json'}" ng-click="currentSearchPanel = 'json'">JSON Preview</li>
    <li class="tabbed-panel_tab" ng-class="{'current': currentSearchPanel === 'rawjson'}" ng-click="currentSearchPanel = 'rawjson'">Raw JSON</li>
  </ul>

  <div id="viewashtml" class="tabbed-panel_panel theme_light" ng-if="currentSearchPanel == 'html'">
    <div preview-search-html></div>
  </div>

  <div id="viewasjson" class="tabbed-panel_panel" ng-if="currentSearchPanel == 'json'">

    <p class="type_copy">The facets and rows you see in the HTML tab are revealed as JSON, below.</p>

    <div class="grid_row five-column">
      <div class="grid_column two">
        <h4>Facets <small>aka <code>counts</code></small></h4>
        <code class="type_codeblock" id="facets">{{ searchDocs.data.counts | json }}</code>
      </div>
      <div class="grid_column three">
        <h4>Rows <small ng-class="{'api-summary-message':message}" ng-show="searchDocs.data.total_rows >= 0">{{message ? message : 'Showing ' + searchDocs.data.rows.length + ' of ' + searchDocs.data.total_rows}}</small></h4>
        <code class="type_codeblock" id="documents">{{ searchDocs.data.rows | json }}</code>
      </div>
    </div>

  </div>

  <div id="viewAsRawJSON" class="tabbed-panel_panel" ng-if="currentSearchPanel == 'rawjson'">
    <p class="type_copy">Here's the full JSON object returned from the service.
    </p>
    <code class="type_codeblock">{{ searchDocs.data | json }}</code>
  </div>

</section>


<div class="button_group">
  <button type="button" class="button_primary" ng-click="goToNextPage('api')"> Continue </button>
</div>
</section>